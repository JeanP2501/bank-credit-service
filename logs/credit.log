2025-12-02 02:21:39.048 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-12-02 02:21:39.083 [main] INFO  com.bank.credit.CreditApplication - Starting CreditApplication using Java 17.0.6 with PID 13056 (C:\Users\Jeanso\Documents\NTT-PROYECTOS\Proyecto_final\credit\target\classes started by Jeanso in C:\Users\Jeanso\Documents\NTT-PROYECTOS\Proyecto_final\credit)
2025-12-02 02:21:39.083 [main] DEBUG com.bank.credit.CreditApplication - Running with Spring Boot v3.4.12, Spring v6.2.14
2025-12-02 02:21:39.084 [main] INFO  com.bank.credit.CreditApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-02 02:21:39.537 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive MongoDB repositories in DEFAULT mode.
2025-12-02 02:21:39.634 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 92 ms. Found 1 Reactive MongoDB repository interface.
2025-12-02 02:21:39.692 [main] INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=e76c93b5-5684-325a-87fe-c4f7588c5ae0
2025-12-02 02:21:40.115 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|reactive-streams|spring-boot", "version": "5.2.1"}, "os": {"type": "Windows", "name": "Windows 10", "architecture": "amd64", "version": "10.0"}, "platform": "Java/Oracle Corporation/17.0.6+9-LTS-190"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=NettyTransportSettings{eventLoopGroup=io.netty.channel.nio.NioEventLoopGroup@6aa5974e, socketChannelClass=null, allocator=null, sslContext=null}, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@5e5ddfbc, com.mongodb.Jep395RecordCodecProvider@5bda157e, com.mongodb.KotlinCodecProvider@67e0fd6d]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-12-02 02:21:40.191 [cluster-ClusterId{value='692e9384b9eb3107f0b0e515', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=27, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=31672500, minRoundTripTimeNanos=0}
2025-12-02 02:21:40.783 [main] INFO  o.s.b.w.e.netty.NettyWebServer - Netty started on port 8083 (http)
2025-12-02 02:21:40.936 [main] INFO  com.bank.credit.CreditApplication - Started CreditApplication in 2.413 seconds (process running for 2.903)
2025-12-02 02:21:49.896 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.netty.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-02 02:21:49.898 [netty-shutdown] INFO  o.s.b.w.e.netty.GracefulShutdown - Graceful shutdown complete
2025-12-02 02:22:04.156 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-12-02 02:22:04.201 [main] INFO  com.bank.credit.CreditApplication - Starting CreditApplication using Java 17.0.6 with PID 6036 (C:\Users\Jeanso\Documents\NTT-PROYECTOS\Proyecto_final\credit\target\classes started by Jeanso in C:\Users\Jeanso\Documents\NTT-PROYECTOS\Proyecto_final\credit)
2025-12-02 02:22:04.203 [main] DEBUG com.bank.credit.CreditApplication - Running with Spring Boot v3.4.12, Spring v6.2.14
2025-12-02 02:22:04.204 [main] INFO  com.bank.credit.CreditApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-02 02:22:04.634 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive MongoDB repositories in DEFAULT mode.
2025-12-02 02:22:04.728 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 90 ms. Found 1 Reactive MongoDB repository interface.
2025-12-02 02:22:04.791 [main] INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=e76c93b5-5684-325a-87fe-c4f7588c5ae0
2025-12-02 02:22:05.192 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|reactive-streams|spring-boot", "version": "5.2.1"}, "os": {"type": "Windows", "name": "Windows 10", "architecture": "amd64", "version": "10.0"}, "platform": "Java/Oracle Corporation/17.0.6+9-LTS-190"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=NettyTransportSettings{eventLoopGroup=io.netty.channel.nio.NioEventLoopGroup@1cd6b1bd, socketChannelClass=null, allocator=null, sslContext=null}, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@443cdaa4, com.mongodb.Jep395RecordCodecProvider@3b41e1bf, com.mongodb.KotlinCodecProvider@619c93ca]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-12-02 02:22:05.265 [cluster-ClusterId{value='692e939d8b14ad379e56ab88', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=27, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=32007900, minRoundTripTimeNanos=0}
2025-12-02 02:22:05.832 [main] INFO  o.s.b.w.e.netty.NettyWebServer - Netty started on port 8083 (http)
2025-12-02 02:22:05.974 [main] INFO  com.bank.credit.CreditApplication - Started CreditApplication in 2.284 seconds (process running for 2.68)
2025-12-02 02:26:09.078 [reactor-http-nio-3] INFO  c.b.c.controller.CreditController - POST /api/credits - Creating credit for customer: {{customerId}}
2025-12-02 02:26:09.078 [reactor-http-nio-3] DEBUG c.bank.credit.service.CreditService - Creating credit for customer: {{customerId}}
2025-12-02 02:26:09.078 [reactor-http-nio-3] DEBUG c.bank.credit.client.CustomerClient - Calling Customer Service to get customer with id: {{customerId}}
2025-12-02 02:26:09.351 [reactor-http-nio-3] ERROR c.bank.credit.client.CustomerClient - Error calling Customer Service: 404 NOT_FOUND - 404 Not Found from GET http://localhost:8081/api/customers/%7B%7BcustomerId%7D%7D
2025-12-02 02:26:09.351 [reactor-http-nio-3] WARN  c.bank.credit.client.CustomerClient - Customer not found with id: {{customerId}}
2025-12-02 02:26:09.353 [reactor-http-nio-3] ERROR c.b.c.e.GlobalExceptionHandler - Customer not found: Customer not found with id: {{customerId}}
2025-12-02 02:26:27.176 [reactor-http-nio-3] INFO  c.b.c.controller.CreditController - POST /api/credits - Creating credit for customer: 692e5e3f76612561df8ef485
2025-12-02 02:26:27.176 [reactor-http-nio-3] DEBUG c.bank.credit.service.CreditService - Creating credit for customer: 692e5e3f76612561df8ef485
2025-12-02 02:26:27.176 [reactor-http-nio-3] DEBUG c.bank.credit.client.CustomerClient - Calling Customer Service to get customer with id: 692e5e3f76612561df8ef485
2025-12-02 02:26:27.221 [reactor-http-nio-3] DEBUG c.bank.credit.client.CustomerClient - Customer found: 692e5e3f76612561df8ef485
2025-12-02 02:26:27.221 [reactor-http-nio-3] DEBUG c.bank.credit.service.CreditService - Validating business rules for customer type: PERSONAL and credit type: PERSONAL_LOAN
2025-12-02 02:26:27.231 [reactor-http-nio-3] DEBUG o.s.d.m.r.query.MongoQueryCreator - Created query Query: { "customerId" : "692e5e3f76612561df8ef485", "creditType" : { "$java" : PERSONAL_LOAN } }, Fields: {}, Sort: {}
2025-12-02 02:26:27.243 [reactor-http-nio-3] DEBUG o.s.d.m.core.ReactiveMongoTemplate - Executing count: { "customerId" : "692e5e3f76612561df8ef485", "creditType" : "PERSONAL_LOAN"} in collection: credits
2025-12-02 02:26:27.243 [reactor-http-nio-3] DEBUG o.s.d.m.core.ReactiveMongoTemplate - Executing count: { "customerId" : "692e5e3f76612561df8ef485", "creditType" : "PERSONAL_LOAN"} in collection: credits
2025-12-02 02:26:27.308 [nioEventLoopGroup-3-3] DEBUG o.s.d.m.core.ReactiveMongoTemplate - Inserting Document containing fields: [creditNumber, creditType, customerId, creditAmount, balance, creditLimit, interestRate, minimumPayment, paymentDueDay, active, createdAt, _class] in collection: credits
2025-12-02 02:26:27.353 [nioEventLoopGroup-3-3] INFO  c.bank.credit.service.CreditService - Credit created successfully: CRD-58B7C74084
2025-12-02 02:27:06.766 [reactor-http-nio-3] INFO  c.b.c.controller.CreditController - POST /api/credits - Creating credit for customer: 692e5e5076612561df8ef486
2025-12-02 02:27:06.766 [reactor-http-nio-3] DEBUG c.bank.credit.service.CreditService - Creating credit for customer: 692e5e5076612561df8ef486
2025-12-02 02:27:06.766 [reactor-http-nio-3] DEBUG c.bank.credit.client.CustomerClient - Calling Customer Service to get customer with id: 692e5e5076612561df8ef486
2025-12-02 02:27:06.773 [reactor-http-nio-3] DEBUG c.bank.credit.client.CustomerClient - Customer found: 692e5e5076612561df8ef486
2025-12-02 02:27:06.773 [reactor-http-nio-3] DEBUG c.bank.credit.service.CreditService - Validating business rules for customer type: BUSINESS and credit type: BUSINESS_LOAN
2025-12-02 02:27:06.774 [reactor-http-nio-3] DEBUG o.s.d.m.core.ReactiveMongoTemplate - Inserting Document containing fields: [creditNumber, creditType, customerId, creditAmount, balance, creditLimit, interestRate, minimumPayment, paymentDueDay, active, createdAt, _class] in collection: credits
2025-12-02 02:27:06.775 [nioEventLoopGroup-3-3] INFO  c.bank.credit.service.CreditService - Credit created successfully: CRD-F9EFAB79D3
2025-12-02 02:27:46.231 [reactor-http-nio-3] INFO  c.b.c.controller.CreditController - POST /api/credits - Creating credit for customer: 692e5e3f76612561df8ef485
2025-12-02 02:27:46.232 [reactor-http-nio-3] DEBUG c.bank.credit.service.CreditService - Creating credit for customer: 692e5e3f76612561df8ef485
2025-12-02 02:27:46.232 [reactor-http-nio-3] DEBUG c.bank.credit.client.CustomerClient - Calling Customer Service to get customer with id: 692e5e3f76612561df8ef485
2025-12-02 02:27:46.238 [reactor-http-nio-3] DEBUG c.bank.credit.client.CustomerClient - Customer found: 692e5e3f76612561df8ef485
2025-12-02 02:27:46.238 [reactor-http-nio-3] DEBUG c.bank.credit.service.CreditService - Validating business rules for customer type: PERSONAL and credit type: CREDIT_CARD
2025-12-02 02:27:46.238 [reactor-http-nio-3] DEBUG o.s.d.m.core.ReactiveMongoTemplate - Inserting Document containing fields: [creditNumber, creditType, customerId, creditAmount, balance, creditLimit, interestRate, minimumPayment, paymentDueDay, active, createdAt, _class] in collection: credits
2025-12-02 02:27:46.240 [nioEventLoopGroup-3-3] INFO  c.bank.credit.service.CreditService - Credit created successfully: CRD-66E30BC364
2025-12-02 02:27:56.815 [reactor-http-nio-3] INFO  c.b.c.controller.CreditController - POST /api/credits - Creating credit for customer: 692e5e5076612561df8ef486
2025-12-02 02:27:56.815 [reactor-http-nio-3] DEBUG c.bank.credit.service.CreditService - Creating credit for customer: 692e5e5076612561df8ef486
2025-12-02 02:27:56.815 [reactor-http-nio-3] DEBUG c.bank.credit.client.CustomerClient - Calling Customer Service to get customer with id: 692e5e5076612561df8ef486
2025-12-02 02:27:56.821 [reactor-http-nio-3] DEBUG c.bank.credit.client.CustomerClient - Customer found: 692e5e5076612561df8ef486
2025-12-02 02:27:56.821 [reactor-http-nio-3] DEBUG c.bank.credit.service.CreditService - Validating business rules for customer type: BUSINESS and credit type: CREDIT_CARD
2025-12-02 02:27:56.822 [reactor-http-nio-3] DEBUG o.s.d.m.core.ReactiveMongoTemplate - Inserting Document containing fields: [creditNumber, creditType, customerId, creditAmount, balance, creditLimit, interestRate, minimumPayment, paymentDueDay, active, createdAt, _class] in collection: credits
2025-12-02 02:27:56.824 [nioEventLoopGroup-3-3] INFO  c.bank.credit.service.CreditService - Credit created successfully: CRD-F0F149540E
2025-12-02 02:28:02.641 [reactor-http-nio-3] INFO  c.b.c.controller.CreditController - GET /api/credits - Fetching all credits
2025-12-02 02:28:02.641 [reactor-http-nio-3] DEBUG c.bank.credit.service.CreditService - Finding all credits
2025-12-02 02:28:02.644 [reactor-http-nio-3] DEBUG o.s.d.m.core.ReactiveMongoTemplate - find using query: {} fields: Document{{}} for class: class com.bank.credit.model.entity.Credit in collection: credits
2025-12-02 02:28:02.672 [reactor-http-nio-3] DEBUG c.bank.credit.service.CreditService - Retrieved all credits
2025-12-02 02:28:10.240 [reactor-http-nio-3] INFO  c.b.c.controller.CreditController - GET /api/credits/692e94ca8b14ad379e56ab8a - Fetching credit by id
2025-12-02 02:28:10.240 [reactor-http-nio-3] DEBUG c.bank.credit.service.CreditService - Finding credit by id: 692e94ca8b14ad379e56ab8a
2025-12-02 02:28:10.242 [reactor-http-nio-3] DEBUG o.s.d.m.core.ReactiveMongoTemplate - findOne using query: { "id" : "692e94ca8b14ad379e56ab8a"} fields: Document{{}} for class: class com.bank.credit.model.entity.Credit in collection: credits
2025-12-02 02:28:10.245 [nioEventLoopGroup-3-3] DEBUG c.bank.credit.service.CreditService - Credit found with id: 692e94ca8b14ad379e56ab8a
2025-12-02 02:28:24.059 [reactor-http-nio-3] INFO  c.b.c.controller.CreditController - GET /api/credits/number/CRD-58B7C74084 - Fetching credit by number
2025-12-02 02:28:24.059 [reactor-http-nio-3] DEBUG c.bank.credit.service.CreditService - Finding credit by credit number: CRD-58B7C74084
2025-12-02 02:28:24.060 [reactor-http-nio-3] DEBUG o.s.d.m.r.query.MongoQueryCreator - Created query Query: { "creditNumber" : "CRD-58B7C74084"}, Fields: {}, Sort: {}
2025-12-02 02:28:24.061 [reactor-http-nio-3] DEBUG o.s.d.m.core.ReactiveMongoTemplate - find using query: { "creditNumber" : "CRD-58B7C74084"} fields: Document{{}} for class: class com.bank.credit.model.entity.Credit in collection: credits
2025-12-02 02:28:24.065 [nioEventLoopGroup-3-3] DEBUG c.bank.credit.service.CreditService - Credit found with number: CRD-58B7C74084
2025-12-02 02:28:30.109 [reactor-http-nio-3] INFO  c.b.c.controller.CreditController - GET /api/credits/customer/692e5e3f76612561df8ef485 - Fetching credits for customer
2025-12-02 02:28:30.109 [reactor-http-nio-3] DEBUG c.bank.credit.service.CreditService - Finding credits for customer: 692e5e3f76612561df8ef485
2025-12-02 02:28:30.110 [reactor-http-nio-3] DEBUG o.s.d.m.r.query.MongoQueryCreator - Created query Query: { "customerId" : "692e5e3f76612561df8ef485"}, Fields: {}, Sort: {}
2025-12-02 02:28:30.111 [reactor-http-nio-3] DEBUG o.s.d.m.core.ReactiveMongoTemplate - find using query: { "customerId" : "692e5e3f76612561df8ef485"} fields: Document{{}} for class: class com.bank.credit.model.entity.Credit in collection: credits
2025-12-02 02:28:30.113 [reactor-http-nio-3] DEBUG c.bank.credit.service.CreditService - Retrieved credits for customer: 692e5e3f76612561df8ef485
2025-12-02 02:29:25.375 [reactor-http-nio-3] INFO  c.b.c.controller.CreditController - POST /api/credits/692e94f28b14ad379e56ab8b/charge - Making charge of 500.00
2025-12-02 02:29:25.376 [reactor-http-nio-3] DEBUG c.bank.credit.service.CreditService - Making charge of 500.00 to credit: 692e94f28b14ad379e56ab8b
2025-12-02 02:29:25.376 [reactor-http-nio-3] DEBUG o.s.d.m.core.ReactiveMongoTemplate - findOne using query: { "id" : "692e94f28b14ad379e56ab8b"} fields: Document{{}} for class: class com.bank.credit.model.entity.Credit in collection: credits
2025-12-02 02:29:25.379 [nioEventLoopGroup-3-3] DEBUG o.s.d.m.core.ReactiveMongoTemplate - Saving Document containing fields: [_id, creditNumber, creditType, customerId, creditAmount, balance, creditLimit, interestRate, minimumPayment, paymentDueDay, active, createdAt, updatedAt, _class]
2025-12-02 02:29:25.383 [nioEventLoopGroup-3-3] INFO  c.bank.credit.service.CreditService - Charge successful. New balance: 500.00
2025-12-02 02:29:34.660 [reactor-http-nio-3] INFO  c.b.c.controller.CreditController - GET /api/credits/692e94f28b14ad379e56ab8b - Fetching credit by id
2025-12-02 02:29:34.660 [reactor-http-nio-3] DEBUG c.bank.credit.service.CreditService - Finding credit by id: 692e94f28b14ad379e56ab8b
2025-12-02 02:29:34.661 [reactor-http-nio-3] DEBUG o.s.d.m.core.ReactiveMongoTemplate - findOne using query: { "id" : "692e94f28b14ad379e56ab8b"} fields: Document{{}} for class: class com.bank.credit.model.entity.Credit in collection: credits
2025-12-02 02:29:34.663 [nioEventLoopGroup-3-3] DEBUG c.bank.credit.service.CreditService - Credit found with id: 692e94f28b14ad379e56ab8b
2025-12-02 02:30:05.069 [reactor-http-nio-3] INFO  c.b.c.controller.CreditController - POST /api/credits/692e94f28b14ad379e56ab8b/charge - Making charge of 99999.00
2025-12-02 02:30:05.069 [reactor-http-nio-3] DEBUG c.bank.credit.service.CreditService - Making charge of 99999.00 to credit: 692e94f28b14ad379e56ab8b
2025-12-02 02:30:05.070 [reactor-http-nio-3] DEBUG o.s.d.m.core.ReactiveMongoTemplate - findOne using query: { "id" : "692e94f28b14ad379e56ab8b"} fields: Document{{}} for class: class com.bank.credit.model.entity.Credit in collection: credits
2025-12-02 02:30:05.072 [nioEventLoopGroup-3-3] ERROR c.b.c.e.GlobalExceptionHandler - Insufficient credit: Insufficient credit. Requested: 99999.00, Available: 4500.00
2025-12-02 02:30:23.858 [reactor-http-nio-3] INFO  c.b.c.controller.CreditController - POST /api/credits/692e94f28b14ad379e56ab8b/charge - Making charge of 1500.00
2025-12-02 02:30:23.858 [reactor-http-nio-3] DEBUG c.bank.credit.service.CreditService - Making charge of 1500.00 to credit: 692e94f28b14ad379e56ab8b
2025-12-02 02:30:23.858 [reactor-http-nio-3] DEBUG o.s.d.m.core.ReactiveMongoTemplate - findOne using query: { "id" : "692e94f28b14ad379e56ab8b"} fields: Document{{}} for class: class com.bank.credit.model.entity.Credit in collection: credits
2025-12-02 02:30:23.862 [nioEventLoopGroup-3-3] DEBUG o.s.d.m.core.ReactiveMongoTemplate - Saving Document containing fields: [_id, creditNumber, creditType, customerId, creditAmount, balance, creditLimit, interestRate, minimumPayment, paymentDueDay, active, createdAt, updatedAt, _class]
2025-12-02 02:30:23.863 [nioEventLoopGroup-3-3] INFO  c.bank.credit.service.CreditService - Charge successful. New balance: 2000.00
2025-12-02 02:30:55.875 [reactor-http-nio-3] INFO  c.b.c.controller.CreditController - POST /api/credits/692e94f28b14ad379e56ab8b/payment - Making payment of 250.00
2025-12-02 02:30:55.875 [reactor-http-nio-3] DEBUG c.bank.credit.service.CreditService - Making payment of 250.00 to credit: 692e94f28b14ad379e56ab8b
2025-12-02 02:30:55.875 [reactor-http-nio-3] DEBUG o.s.d.m.core.ReactiveMongoTemplate - findOne using query: { "id" : "692e94f28b14ad379e56ab8b"} fields: Document{{}} for class: class com.bank.credit.model.entity.Credit in collection: credits
2025-12-02 02:30:55.878 [nioEventLoopGroup-3-3] DEBUG o.s.d.m.core.ReactiveMongoTemplate - Saving Document containing fields: [_id, creditNumber, creditType, customerId, creditAmount, balance, creditLimit, interestRate, minimumPayment, paymentDueDay, active, createdAt, updatedAt, _class]
2025-12-02 02:30:55.879 [nioEventLoopGroup-3-3] INFO  c.bank.credit.service.CreditService - Payment successful. New balance: 1750.00
2025-12-02 02:31:07.269 [reactor-http-nio-3] INFO  c.b.c.controller.CreditController - POST /api/credits/692e94f28b14ad379e56ab8b/payment - Making payment of 500.00
2025-12-02 02:31:07.269 [reactor-http-nio-3] DEBUG c.bank.credit.service.CreditService - Making payment of 500.00 to credit: 692e94f28b14ad379e56ab8b
2025-12-02 02:31:07.269 [reactor-http-nio-3] DEBUG o.s.d.m.core.ReactiveMongoTemplate - findOne using query: { "id" : "692e94f28b14ad379e56ab8b"} fields: Document{{}} for class: class com.bank.credit.model.entity.Credit in collection: credits
2025-12-02 02:31:07.272 [nioEventLoopGroup-3-3] DEBUG o.s.d.m.core.ReactiveMongoTemplate - Saving Document containing fields: [_id, creditNumber, creditType, customerId, creditAmount, balance, creditLimit, interestRate, minimumPayment, paymentDueDay, active, createdAt, updatedAt, _class]
2025-12-02 02:31:07.273 [nioEventLoopGroup-3-3] INFO  c.bank.credit.service.CreditService - Payment successful. New balance: 1250.00
2025-12-02 02:31:19.702 [reactor-http-nio-3] INFO  c.b.c.controller.CreditController - POST /api/credits/692e94f28b14ad379e56ab8b/payment - Making payment of 100.00
2025-12-02 02:31:19.702 [reactor-http-nio-3] DEBUG c.bank.credit.service.CreditService - Making payment of 100.00 to credit: 692e94f28b14ad379e56ab8b
2025-12-02 02:31:19.702 [reactor-http-nio-3] DEBUG o.s.d.m.core.ReactiveMongoTemplate - findOne using query: { "id" : "692e94f28b14ad379e56ab8b"} fields: Document{{}} for class: class com.bank.credit.model.entity.Credit in collection: credits
2025-12-02 02:31:19.705 [nioEventLoopGroup-3-3] DEBUG o.s.d.m.core.ReactiveMongoTemplate - Saving Document containing fields: [_id, creditNumber, creditType, customerId, creditAmount, balance, creditLimit, interestRate, minimumPayment, paymentDueDay, active, createdAt, updatedAt, _class]
2025-12-02 02:31:19.706 [nioEventLoopGroup-3-3] INFO  c.bank.credit.service.CreditService - Payment successful. New balance: 1150.00
2025-12-02 02:31:31.643 [reactor-http-nio-3] INFO  c.b.c.controller.CreditController - POST /api/credits/692e94f28b14ad379e56ab8b/payment - Making payment of 2000.00
2025-12-02 02:31:31.644 [reactor-http-nio-3] DEBUG c.bank.credit.service.CreditService - Making payment of 2000.00 to credit: 692e94f28b14ad379e56ab8b
2025-12-02 02:31:31.644 [reactor-http-nio-3] DEBUG o.s.d.m.core.ReactiveMongoTemplate - findOne using query: { "id" : "692e94f28b14ad379e56ab8b"} fields: Document{{}} for class: class com.bank.credit.model.entity.Credit in collection: credits
2025-12-02 02:31:31.646 [nioEventLoopGroup-3-3] ERROR c.b.c.e.GlobalExceptionHandler - Business rule violation: Payment amount cannot exceed current balance
2025-12-02 02:31:52.151 [reactor-http-nio-3] INFO  c.b.c.controller.CreditController - POST /api/credits - Creating credit for customer: 692e5e3f76612561df8ef485
2025-12-02 02:31:52.152 [reactor-http-nio-3] DEBUG c.bank.credit.service.CreditService - Creating credit for customer: 692e5e3f76612561df8ef485
2025-12-02 02:31:52.152 [reactor-http-nio-3] DEBUG c.bank.credit.client.CustomerClient - Calling Customer Service to get customer with id: 692e5e3f76612561df8ef485
2025-12-02 02:31:52.160 [reactor-http-nio-3] DEBUG c.bank.credit.client.CustomerClient - Customer found: 692e5e3f76612561df8ef485
2025-12-02 02:31:52.160 [reactor-http-nio-3] DEBUG c.bank.credit.service.CreditService - Validating business rules for customer type: PERSONAL and credit type: PERSONAL_LOAN
2025-12-02 02:31:52.160 [reactor-http-nio-3] DEBUG o.s.d.m.r.query.MongoQueryCreator - Created query Query: { "customerId" : "692e5e3f76612561df8ef485", "creditType" : { "$java" : PERSONAL_LOAN } }, Fields: {}, Sort: {}
2025-12-02 02:31:52.161 [reactor-http-nio-3] DEBUG o.s.d.m.core.ReactiveMongoTemplate - Executing count: { "customerId" : "692e5e3f76612561df8ef485", "creditType" : "PERSONAL_LOAN"} in collection: credits
2025-12-02 02:31:52.161 [reactor-http-nio-3] DEBUG o.s.d.m.core.ReactiveMongoTemplate - Executing count: { "customerId" : "692e5e3f76612561df8ef485", "creditType" : "PERSONAL_LOAN"} in collection: credits
2025-12-02 02:31:52.169 [nioEventLoopGroup-3-3] ERROR c.b.c.e.GlobalExceptionHandler - Business rule violation: Personal customer can only have one personal loan
2025-12-02 02:32:07.889 [reactor-http-nio-3] INFO  c.b.c.controller.CreditController - POST /api/credits - Creating credit for customer: 692e5e5076612561df8ef486
2025-12-02 02:32:07.889 [reactor-http-nio-3] DEBUG c.bank.credit.service.CreditService - Creating credit for customer: 692e5e5076612561df8ef486
2025-12-02 02:32:07.889 [reactor-http-nio-3] DEBUG c.bank.credit.client.CustomerClient - Calling Customer Service to get customer with id: 692e5e5076612561df8ef486
2025-12-02 02:32:07.895 [reactor-http-nio-3] DEBUG c.bank.credit.client.CustomerClient - Customer found: 692e5e5076612561df8ef486
2025-12-02 02:32:07.895 [reactor-http-nio-3] DEBUG c.bank.credit.service.CreditService - Validating business rules for customer type: BUSINESS and credit type: BUSINESS_LOAN
2025-12-02 02:32:07.895 [reactor-http-nio-3] DEBUG o.s.d.m.core.ReactiveMongoTemplate - Inserting Document containing fields: [creditNumber, creditType, customerId, creditAmount, balance, creditLimit, interestRate, active, createdAt, _class] in collection: credits
2025-12-02 02:32:07.897 [nioEventLoopGroup-3-3] INFO  c.bank.credit.service.CreditService - Credit created successfully: CRD-BA68BA2BF9
2025-12-02 02:32:36.018 [reactor-http-nio-3] INFO  c.b.c.controller.CreditController - POST /api/credits/692e94ca8b14ad379e56ab8a/charge - Making charge of 100.00
2025-12-02 02:32:36.018 [reactor-http-nio-3] DEBUG c.bank.credit.service.CreditService - Making charge of 100.00 to credit: 692e94ca8b14ad379e56ab8a
2025-12-02 02:32:36.018 [reactor-http-nio-3] DEBUG o.s.d.m.core.ReactiveMongoTemplate - findOne using query: { "id" : "692e94ca8b14ad379e56ab8a"} fields: Document{{}} for class: class com.bank.credit.model.entity.Credit in collection: credits
2025-12-02 02:32:36.020 [nioEventLoopGroup-3-3] ERROR c.b.c.e.GlobalExceptionHandler - Business rule violation: Charges can only be made to credit cards
2025-12-02 03:16:46.899 [reactor-http-nio-4] INFO  c.b.c.controller.CreditController - GET /api/credits/692e94f28b14ad379e56ab8b - Fetching credit by id
2025-12-02 03:16:46.899 [reactor-http-nio-4] DEBUG c.bank.credit.service.CreditService - Finding credit by id: 692e94f28b14ad379e56ab8b
2025-12-02 03:16:46.900 [reactor-http-nio-4] DEBUG o.s.d.m.core.ReactiveMongoTemplate - findOne using query: { "id" : "692e94f28b14ad379e56ab8b"} fields: Document{{}} for class: class com.bank.credit.model.entity.Credit in collection: credits
2025-12-02 03:16:46.902 [nioEventLoopGroup-3-3] DEBUG c.bank.credit.service.CreditService - Credit found with id: 692e94f28b14ad379e56ab8b
2025-12-02 03:16:46.915 [reactor-http-nio-5] INFO  c.b.c.controller.CreditController - POST /api/credits/692e94f28b14ad379e56ab8b/payment - Making payment of 250.00
2025-12-02 03:16:46.915 [reactor-http-nio-5] DEBUG c.bank.credit.service.CreditService - Making payment of 250.00 to credit: 692e94f28b14ad379e56ab8b
2025-12-02 03:16:46.916 [reactor-http-nio-5] DEBUG o.s.d.m.core.ReactiveMongoTemplate - findOne using query: { "id" : "692e94f28b14ad379e56ab8b"} fields: Document{{}} for class: class com.bank.credit.model.entity.Credit in collection: credits
2025-12-02 03:16:46.918 [nioEventLoopGroup-3-3] DEBUG o.s.d.m.core.ReactiveMongoTemplate - Saving Document containing fields: [_id, creditNumber, creditType, customerId, creditAmount, balance, creditLimit, interestRate, minimumPayment, paymentDueDay, active, createdAt, updatedAt, _class]
2025-12-02 03:16:46.919 [nioEventLoopGroup-3-3] INFO  c.bank.credit.service.CreditService - Payment successful. New balance: 900.00
2025-12-02 03:17:20.647 [reactor-http-nio-4] INFO  c.b.c.controller.CreditController - GET /api/credits/692e94f28b14ad379e56ab8b - Fetching credit by id
2025-12-02 03:17:20.647 [reactor-http-nio-4] DEBUG c.bank.credit.service.CreditService - Finding credit by id: 692e94f28b14ad379e56ab8b
2025-12-02 03:17:20.647 [reactor-http-nio-4] DEBUG o.s.d.m.core.ReactiveMongoTemplate - findOne using query: { "id" : "692e94f28b14ad379e56ab8b"} fields: Document{{}} for class: class com.bank.credit.model.entity.Credit in collection: credits
2025-12-02 03:17:20.649 [nioEventLoopGroup-3-3] DEBUG c.bank.credit.service.CreditService - Credit found with id: 692e94f28b14ad379e56ab8b
2025-12-02 03:17:20.655 [reactor-http-nio-5] INFO  c.b.c.controller.CreditController - POST /api/credits/692e94f28b14ad379e56ab8b/charge - Making charge of 150.00
2025-12-02 03:17:20.655 [reactor-http-nio-5] DEBUG c.bank.credit.service.CreditService - Making charge of 150.00 to credit: 692e94f28b14ad379e56ab8b
2025-12-02 03:17:20.655 [reactor-http-nio-5] DEBUG o.s.d.m.core.ReactiveMongoTemplate - findOne using query: { "id" : "692e94f28b14ad379e56ab8b"} fields: Document{{}} for class: class com.bank.credit.model.entity.Credit in collection: credits
2025-12-02 03:17:20.657 [nioEventLoopGroup-3-3] DEBUG o.s.d.m.core.ReactiveMongoTemplate - Saving Document containing fields: [_id, creditNumber, creditType, customerId, creditAmount, balance, creditLimit, interestRate, minimumPayment, paymentDueDay, active, createdAt, updatedAt, _class]
2025-12-02 03:17:20.658 [nioEventLoopGroup-3-3] INFO  c.bank.credit.service.CreditService - Charge successful. New balance: 1050.00
2025-12-02 03:18:53.124 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.netty.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-02 03:18:53.125 [netty-shutdown] INFO  o.s.b.w.e.netty.GracefulShutdown - Graceful shutdown complete
2025-12-02 12:40:58.049 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-12-02 12:40:58.085 [main] INFO  com.bank.credit.CreditApplication - Starting CreditApplication using Java 17.0.6 with PID 15716 (C:\Users\Jeanso\Documents\NTT-PROYECTOS\Proyecto_final\credit\target\classes started by Jeanso in C:\Users\Jeanso\Documents\NTT-PROYECTOS\Proyecto_final\credit)
2025-12-02 12:40:58.085 [main] DEBUG com.bank.credit.CreditApplication - Running with Spring Boot v3.4.12, Spring v6.2.14
2025-12-02 12:40:58.086 [main] INFO  com.bank.credit.CreditApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-02 12:40:58.114 [main] INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Fetching config from server at : http://localhost:8888
2025-12-02 12:40:58.115 [main] INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Located environment: name=credit, profiles=[default], label=null, version=null, state=null
2025-12-02 12:40:58.500 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive MongoDB repositories in DEFAULT mode.
2025-12-02 12:40:58.585 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 80 ms. Found 1 Reactive MongoDB repository interface.
2025-12-02 12:40:58.644 [main] INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=24b138d9-6fe4-3833-892d-1a13cb4a8bea
2025-12-02 12:40:59.068 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|reactive-streams|spring-boot", "version": "5.2.1"}, "os": {"type": "Windows", "name": "Windows 10", "architecture": "amd64", "version": "10.0"}, "platform": "Java/Oracle Corporation/17.0.6+9-LTS-190"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=NettyTransportSettings{eventLoopGroup=io.netty.channel.nio.NioEventLoopGroup@7cd3e0da, socketChannelClass=null, allocator=null, sslContext=null}, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@919086, com.mongodb.Jep395RecordCodecProvider@67e77f52, com.mongodb.KotlinCodecProvider@7ead1d80]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-12-02 12:40:59.145 [cluster-ClusterId{value='692f24abb4a10444b8242e5a', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=27, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=33430200, minRoundTripTimeNanos=0}
2025-12-02 12:40:59.667 [main] INFO  o.s.b.w.e.netty.NettyWebServer - Netty started on port 8083 (http)
2025-12-02 12:40:59.787 [main] INFO  com.bank.credit.CreditApplication - Started CreditApplication in 2.443 seconds (process running for 2.823)
2025-12-02 13:02:25.502 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.netty.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-02 13:02:25.504 [netty-shutdown] INFO  o.s.b.w.e.netty.GracefulShutdown - Graceful shutdown complete
